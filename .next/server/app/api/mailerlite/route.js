(()=>{var e={};e.id=774,e.ids=[774],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},17776:(e,r,t)=>{"use strict";t.r(r),t.d(r,{patchFetch:()=>f,routeModule:()=>m,serverHooks:()=>h,workAsyncStorage:()=>y,workUnitAsyncStorage:()=>g});var s={};t.r(s),t.d(s,{POST:()=>d});var i=t(42706),n=t(28203),o=t(45994),a=t(39187),l=t(30379);function p(e,r){if(e)return e.length<=r?e:e.substring(0,r)}async function u(e){let r=process.env.MAILERLITE_API_KEY;if(!r||r.length<50)return console.warn("MAILERLITE_API_KEY is missing or invalid. Subscriber sync skipped."),!1;try{let t=await fetch("https://connect.mailerlite.com/api/subscribers",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({email:e.email,fields:{company:p(e.brandName,255),industry:p(e.industry,255),website:p(e.websiteUrl,255),keywords:p(e.keywords,255),assessment:p(e.reportUrl,1024)},status:"active"})});if(!t.ok){let e=await t.json().catch(()=>({}));return console.error("MailerLite sync failed:",e),!1}return!0}catch(e){return console.error("Error syncing to MailerLite:",e),!1}}let c=l.z.object({email:l.z.string().email(),brandName:l.z.string(),industry:l.z.string(),websiteUrl:l.z.string(),keywords:l.z.string(),reportUrl:l.z.string().optional(),reportId:l.z.string().optional()});async function d(e){try{let r=await e.json(),t=c.safeParse(r);if(!t.success)return a.NextResponse.json({error:"Invalid payload",details:t.error.flatten()},{status:400});let{reportId:s,reportUrl:i,...n}=t.data,o=e.headers.get("host"),l=s&&o?`https://${o}/report/${s}`:i,p=await u({...n,reportUrl:l});return a.NextResponse.json({success:p})}catch(e){return console.error("MailerLite API error:",e),a.NextResponse.json({error:"Failed to add subscriber"},{status:500})}}let m=new i.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/mailerlite/route",pathname:"/api/mailerlite",filename:"route",bundlePath:"app/api/mailerlite/route"},resolvedPagePath:"/home/riteshsharma/Desktop/prsnl-work/AISEO_GIG/aieo-by-getnifty/app/api/mailerlite/route.ts",nextConfigOutput:"",userland:s}),{workAsyncStorage:y,workUnitAsyncStorage:g,serverHooks:h}=m;function f(){return(0,o.patchFetch)({workAsyncStorage:y,workUnitAsyncStorage:g})}},96487:()=>{},78335:()=>{}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[989,452,379],()=>t(17776));module.exports=s})();